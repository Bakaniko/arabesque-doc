<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data pre processing | Arabesque documentation</title>
  <meta name="description" content="This is the online documentation of the Arabesque web application." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data pre processing | Arabesque documentation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the online documentation of the Arabesque web application." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data pre processing | Arabesque documentation" />
  
  <meta name="twitter:description" content="This is the online documentation of the Arabesque web application." />
  

<meta name="author" content="GFlowiz project team" />


<meta name="date" content="2021-10-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-import.html"/>
<link rel="next" href="interface.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Arabesque documentation</a></li>

<li class="divider"></li>
<li><a href="index.html#about-arabesque">About <em>Arabesque</em></a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Challenges</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#general-project-and-funding"><i class="fa fa-check"></i>General project and funding</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-geographic-flow-vizualisation-gflowiz-project"><i class="fa fa-check"></i>The geographic flow vizualisation (gflowiz) project</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#funding"><i class="fa fa-check"></i>Funding</a></li>
</ul></li>
<li><a href="index.html#about-arabesque-documentation">About <em>Arabesque</em> documentation</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>1</b> Data import</a><ul>
<li class="chapter" data-level="1.1" data-path="data-import.html"><a href="data-import.html#ricardo-data"><i class="fa fa-check"></i><b>1.1</b> RICardo data</a></li>
<li class="chapter" data-level="1.2" data-path="data-import.html"><a href="data-import.html#statistical-datasets"><i class="fa fa-check"></i><b>1.2</b> Statistical datasets</a><ul>
<li class="chapter" data-level="1.2.1" data-path="data-import.html"><a href="data-import.html#links-edges-data"><i class="fa fa-check"></i><b>1.2.1</b> Links (<em>edges</em>) data</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-import.html"><a href="data-import.html#nodes-vertex-data"><i class="fa fa-check"></i><b>1.2.2</b> Nodes (<em>vertex</em>) data</a></li>
<li class="chapter" data-level="1.2.3" data-path="data-import.html"><a href="data-import.html#preset-dataset"><i class="fa fa-check"></i><b>1.2.3</b> Preset dataset</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-pre-processing.html"><a href="data-pre-processing.html"><i class="fa fa-check"></i><b>2</b> Data pre processing</a><ul>
<li class="chapter" data-level="2.1" data-path="data-pre-processing.html"><a href="data-pre-processing.html#data-importation"><i class="fa fa-check"></i><b>2.1</b> Data importation</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-pre-processing.html"><a href="data-pre-processing.html#links-edges-dataset-importation"><i class="fa fa-check"></i><b>2.1.1</b> Links (<em>edges</em>) dataset importation</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-pre-processing.html"><a href="data-pre-processing.html#nodes-vertex-dataset-importation"><i class="fa fa-check"></i><b>2.2</b> Nodes (<em>vertex</em>) dataset importation</a></li>
<li class="chapter" data-level="2.3" data-path="data-pre-processing.html"><a href="data-pre-processing.html#preset-nodes-dataset"><i class="fa fa-check"></i><b>2.3</b> Preset nodes dataset</a></li>
<li class="chapter" data-level="2.4" data-path="data-pre-processing.html"><a href="data-pre-processing.html#checking-missing-nodeslinks-features"><i class="fa fa-check"></i><b>2.4</b> Checking missing nodes/links features</a></li>
<li class="chapter" data-level="2.5" data-path="data-pre-processing.html"><a href="data-pre-processing.html#visualize-a-default-flow-map"><i class="fa fa-check"></i><b>2.5</b> Visualize a default flow map</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="interface.html"><a href="interface.html"><i class="fa fa-check"></i><b>3</b> Interface</a><ul>
<li class="chapter" data-level="3.1" data-path="interface.html"><a href="interface.html#the-central-panel"><i class="fa fa-check"></i><b>3.1</b> The central panel</a><ul>
<li class="chapter" data-level="3.1.1" data-path="interface.html"><a href="interface.html#primary-actions-with-butons"><i class="fa fa-check"></i><b>3.1.1</b> Primary actions with butons</a></li>
<li class="chapter" data-level="3.1.2" data-path="interface.html"><a href="interface.html#primary-legend"><i class="fa fa-check"></i><b>3.1.2</b> Primary legend</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="interface.html"><a href="interface.html#the-geographic-panel"><i class="fa fa-check"></i><b>3.2</b> The geographic panel</a><ul>
<li class="chapter" data-level="3.2.1" data-path="interface.html"><a href="interface.html#add-node-features"><i class="fa fa-check"></i><b>3.2.1</b> Add Node Features</a></li>
<li class="chapter" data-level="3.2.2" data-path="interface.html"><a href="interface.html#add-link-features"><i class="fa fa-check"></i><b>3.2.2</b> Add Link Features</a></li>
<li class="chapter" data-level="3.2.3" data-path="interface.html"><a href="interface.html#add-base-layer"><i class="fa fa-check"></i><b>3.2.3</b> Add Base Layer</a></li>
<li class="chapter" data-level="3.2.4" data-path="interface.html"><a href="interface.html#add-tile-layers-osm"><i class="fa fa-check"></i><b>3.2.4</b> Add Tile Layers (OSM)</a></li>
<li class="chapter" data-level="3.2.5" data-path="interface.html"><a href="interface.html#import-geojson-layers"><i class="fa fa-check"></i><b>3.2.5</b> Import GeoJson Layers</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="interface.html"><a href="interface.html#the-statistical-panel"><i class="fa fa-check"></i><b>3.3</b> The statistical panel</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exports.html"><a href="exports.html"><i class="fa fa-check"></i><b>4</b> Exports</a></li>
<li class="chapter" data-level="5" data-path="data-sets.html"><a href="data-sets.html"><i class="fa fa-check"></i><b>5</b> Data sets</a><ul>
<li class="chapter" data-level="5.1" data-path="data-sets.html"><a href="data-sets.html#ricardo-data-set-used-in-the-documentation"><i class="fa fa-check"></i><b>5.1</b> RIcardo Data set used in the documentation</a><ul>
<li class="chapter" data-level="5.1.1" data-path="data-sets.html"><a href="data-sets.html#ricardo-general-description"><i class="fa fa-check"></i><b>5.1.1</b> RIcardo general description</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-sets.html"><a href="data-sets.html#ricardo-dataset-description"><i class="fa fa-check"></i><b>5.1.2</b> RIcardo dataset description</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-sets.html"><a href="data-sets.html#datasets-used-for-demonstration-purposes"><i class="fa fa-check"></i><b>5.2</b> Datasets used for demonstration purposes</a><ul>
<li class="chapter" data-level="5.2.1" data-path="data-sets.html"><a href="data-sets.html#swiss-commuting"><i class="fa fa-check"></i><b>5.2.1</b> Swiss Commuting</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-sets.html"><a href="data-sets.html#london-bike-sharing"><i class="fa fa-check"></i><b>5.2.2</b> London Bike Sharing</a></li>
<li class="chapter" data-level="5.2.3" data-path="data-sets.html"><a href="data-sets.html#french-commutingmobilités-professionelles-mobpro"><i class="fa fa-check"></i><b>5.2.3</b> French Commuting/Mobilités professionelles (MOBPRO)</a></li>
<li class="chapter" data-level="5.2.4" data-path="data-sets.html"><a href="data-sets.html#french-school-mobilitiesmobilités-scolaires-mobsco"><i class="fa fa-check"></i><b>5.2.4</b> French School Mobilities/Mobilités scolaires (MOBSCO)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Arabesque documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-pre-processing" class="section level1">
<h1><span class="header-section-number">2</span> Data pre processing</h1>
<p>The datasets are automatically modified when imported. Arabesque computes different indicators, which are available in a list that can be downloaded in . csv format (see Export and Save sections).</p>
<p><em>Indicators on links</em>: Euclidean distance between the origin and destination entities</p>
<p><em>Indicators on nodes</em> : see below the additional indicators () automatically calculated on the nodes of the RIcardo data</p>
<p>See below the indicators that have been automatically computed on the nodes of the RIcardo data.</p>
<p><img src="images/GjzU9IE.png" /></p>
<p><strong>CASE STUDY</strong></p>
<p>These files come from <a href="http://ricardo.medialab.sciences-po.fr/#/">RIcardo</a>, a research project on historical international trade flows,
observed from the beginning of the Industrial Revolution to the World War II. The project combines a historical trade flows database
covering all countries of the world, see: <a href="https://github.com/medialab/ricardo_data/releases/tag/2017.12">github/medialab/ricardo_data</a>
with a website that offers to explore the history of international trade flows through visualizations,
see: <a href="http://ricardo.medialab.sciences-po.fr/#/">medialab/ricardo</a>. In order to produce the first cartographic / geovisualizations
of this historical corpus describing trade flows, a dataset has been prepared by Paul Girard (Medialab, Sciences Po) and Béatrice Dedinger (Centre d’Histoire, Sciences Po) for collective handling and exploitation during the GEOWEB-gflowiz worshop organized during the SAGEO2019 conference
(More information: <a href="https://geoflowiz.hypotheses.org/workshop-geoweb-gflowiz-sageo2019">geoweb-gflowiz-Sageo</a>.</p>
<p>A french version of this tutorial is available in French here: <br/>
<a href="https://github.com/gflowiz/sageo-ricardo">Version française</a></p>
<p>The files used are available in this repository have the following structure:</p>
<ul>
<li><a href="https://raw.githubusercontent.com/gflowiz/sageo-ricardo/master/SAGEO_RICardo_nodes.csv">SAGEO_RICardo_nodes.csv</a>: geographical location of entities files
<ul>
<li>id (identifier of the geographical entity)</li>
<li>name (name of the geographical entity)</li>
<li>type (entity type : <em>country</em>, <em>city</em>, …)</li>
<li>continent (<em>continent</em>)</li>
<li>lat (<em>latitude</em>)</li>
<li>long (<em>longitude</em>)</li>
</ul></li>
<li><a href="https://raw.githubusercontent.com/gflowiz/sageo-ricardo/master/SAGEO_RICardo_edges_small.csv">SAGEO_RICardo_edges_small.csv</a> : aggregated historical trade flows (to reduce the size of the dataset)
<ul>
<li>idorigin (identifier of the entity of origin of the flow)</li>
<li>iddestination (identifier of the destination entity of the flow)</li>
<li>volume (financial volume of the flow in pounds sterling)</li>
<li>decennie (decade concerned by the flow)</li>
</ul></li>
<li><a href="https://raw.githubusercontent.com/gflowiz/sageo-ricardo/master/SAGEO_RICardo_edges_nona.csv">SAGEO_RICardo_edges_nona.csv</a> : non-aggregated historical trade flows
<ul>
<li>idorigin (identifier of the entity of origin of the flow)</li>
<li>iddestination (identifier of the destination entity of the flow)</li>
<li>volume (financial volume of the flow in pounds sterling)</li>
<li>annee (year of the exchange)</li>
<li>periode (period of the exchange)</li>
<li>decennie (decade of exchange)</li>
</ul></li>
</ul>
<div id="data-importation" class="section level2">
<h2><span class="header-section-number">2.1</span> Data importation</h2>
<div id="links-edges-dataset-importation" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Links (<em>edges</em>) dataset importation</h3>
<p>Arabesque requires the loading of at least one stream data set: a link file in CSV (separator: comma) and long format.</p>
<p>You must also declare the 3 minimum fields required for flow mapping: those corresponding to the origin locations, to the destination locations and the flow values.</p>
<p>If the OD matrix is temporal or available for different categories, you must also choose an aggregation method.</p>
<p>On the homepage of(<a href="http://arabesque.ifsttar.fr/">Arabesque</a>), load at least one set of flow data.</p>
<p><img src="images/BjvHVHn.png" /></p>
<ul>
<li>Click on the browse button</li>
</ul>
<p><strong>Application</strong></p>
<p>Statistical dataset</p>
<p>Loading data <em>SAGEO_RICardo_edges_small.csv</em>.</p>
<p><img src="images/GjzU9IE.png" /></p>
<p>The data must be in long format, with at least 3 columns : origin, destination, flow</p>
<p>The data must be in long format, with at least 3 columns to identify the origin, destination and volume of flows.</p>
<p>If the flow data are multiscalar (e.g. flows that concern several social groups, several goods transported or that occur on several dates), it is necessary to aggregate them when loading them into Arabesque.</p>
<p>Several aggregation functions are available (sum, average, median, maximum, minimum) to simplify the flows.</p>
<p><img src="images/flow_aggreg_import.png" /></p>
<p>Note: This aggregation does not interfere with the geo-visualization possibilities that will remain available for all existing types.</p>
</div>
</div>
<div id="nodes-vertex-dataset-importation" class="section level2">
<h2><span class="header-section-number">2.2</span> Nodes (<em>vertex</em>) dataset importation</h2>
<p>If you have locational data associated with your ODs, you can load the corresponding node files with “Import Location”,
otherwise you can use predefined locations with “Preset Location”.</p>
<p>If you select “Import Location”, you must load a .GEOJSON or .CSV file, then choose the ID of the nodes and their lat/long geographic coordinates.</p>
<p><strong>Application</strong></p>
<p>Loading <em>SAGEO_RICardo_nodes.csv</em> data</p>
<p><img src="images/import_nodes.png" /></p>
<p>The data must be in long format, with at least 3 columns to identify the place and the latitude (Y) and longitude (X) coordinates.</p>
<p>If you do not have a file for the geometry, you can use the codes identifying the reference data (e.g. INSEE codes of the French communes, ISO codes of the countries), to automatically geolocate your nodes. See Preset.</p>
</div>
<div id="preset-nodes-dataset" class="section level2">
<h2><span class="header-section-number">2.3</span> Preset nodes dataset</h2>
<p>Example of pre-selection of French municipalities.</p>
<p><img src="images/preset_nodes_import.png" /></p>
<p>After loading the link and node files, Arabesque automatically performs a join of the common attributes between the two files.</p>
</div>
<div id="checking-missing-nodeslinks-features" class="section level2">
<h2><span class="header-section-number">2.4</span> Checking missing nodes/links features</h2>
<p>Links that do not have an origin and/or destination ID are automatically deleted. Nodes that don’t have an ID code that allows them to be geographically located are also not kept.</p>
<p>The list of deleted nodes and links is displayed in a new window.</p>
<p><img src="images/import_suppr_entities.png" /></p>
<p>This list is for quick reference only. You must copy and paste it (into a text file, for example) if you want to keep the list of deleted entities : here 77 nodes have been deleted because they are not related to other nodes. The corresponding nodes ID are list.</p>
<p>Loading data into Arabesque leads to the creation of a default map, which is placed in the center of the interface.</p>
</div>
<div id="visualize-a-default-flow-map" class="section level2">
<h2><span class="header-section-number">2.5</span> Visualize a default flow map</h2>
<p>Loading data in Arabesque leads to the creation of a default map.</p>
<p>By default, the links are represented in shades of blue and the nodes in red. The map is presented in the WGS84 projection, according to the lat/lon coordinates* declared during the import.</p>
<p>Except in the case of loading a projected geometry as input, the map is presented in WGS84.</p>
<p>Hereby is the Ricardo’s dataset default map with global statistic of the percent of links versus the percent of volume of flows and nodes.</p>
<p><img src="images/defaut_flowmap.png" />
Only the 10% most important links (in value) are represented and symbolized (see the automatic legend) according to their intensity (the flow variable entered at import).
The corresponding nodes are symbolized according to their degree (variable calculated automatically during the import).</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-import.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interface.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["arabesque-doc.pdf", "arabesque-doc.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
